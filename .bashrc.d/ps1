function _update_ps1() {
    PS1=$(opsline --shell bash \
      --theme gruvbox \
      --segments cwd,readonly,git,kube,containers,terraform,root \
      --cwd-dironly \
      --kube-critical-contexts kind-prod,minikube \
      --kube-context-aliases "kind-prod:prod,minikube:dev" \
      --containers-url "unix:/run/user/1000/podman/podman.sock" \
      --terraform-critical-workspaces prod)

    # Uncomment the following line to automatically clear errors after showing
    # them once. This not only clears the error for powerline-go, but also for
    # everything else you run in that shell. Don't enable this if you're not
    # sure this is what you want.

    #set "?"
}

#TODO
# if [ "$TERM" != "linux" ] && command -v opsline > /dev/null; then
    PROMPT_COMMAND="_update_ps1; $PROMPT_COMMAND"
# fi
